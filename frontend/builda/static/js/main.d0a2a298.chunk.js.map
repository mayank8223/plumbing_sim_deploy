{"version":3,"sources":["logo.svg","colors.js","config/index.js","WebSocket.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","Colors","API_PATH","window","location","origin","replace","WebSocketService","callbacks","this","socketRef","instance","path","config","console","log","WebSocket","onmessage","e","socketNewMessage","data","onopen","onerror","message","onclose","connect","parsedData","JSON","parse","command","Object","keys","length","username","sendMessage","i","j","direction","gameCallback","send","stringify","err","readyState","callback","socket","recursion","waitForSocketConnection","setTimeout","WebSocketInstance","getInstance","LoginComponent","props","usernameChangeHandler","event","setState","target","value","state","className","onSubmit","handleLogin","type","onChange","placeholder","required","React","Component","Block","style","backgroundColor","color","onClick","Grid","grid","x","y","n","row","push","renderBlock","renderRow","size","renderGrid","Direction","text","Blank","Controls","renderBlank","renderDirection","Reset","App","preventDefault","loggedIn","initUser","addCallbacks","gameUpdate","bind","Array","fill","col","component","directionClick","blockClick","reset","handleBlockClick","handleDirectionClick","handleReset","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.d0a2a298.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","let Colors = []\nColors[\"blank\"] = \"white\"\nColors[\"active\"] = \"blue\"\nColors[\"pipe\"] = \"red\"\nColors[\"split\"] = \"black\"\n\nexport default Colors;","\nvar API_PATH = window.location.origin.replace(/^http/,'ws')\n\nexport default {\n    API_PATH\n};","import config from './config';\n\nclass WebSocketService{\n\tstatic instance = null;\n\tcallbacks = {};\n\n\tstatic getInstance(){\n        if (!WebSocketService.instance){\n            WebSocketService.instance = new WebSocketService();\n        }\n        return WebSocketService.instance;\n    }\n\n    constructor(){\n        this.socketRef = null;\n    }\n\n    connect(){\n        const path = config.API_PATH;\n        console.log(path)\n        this.socketRef = new WebSocket(path);\n        \n        this.socketRef.onmessage = e => {\n        \tconsole.log('Received')\n            this.socketNewMessage(e.data);\n          };\n\n        this.socketRef.onopen = () => {\n            console.log(\"WebSocket open\");\n        };\n        \n        this.socketRef.onerror = e => {\n            console.log(e.message);\n        };\n\n        this.socketRef.onclose = () => {\n            console.log(\"WebSocket closed, restarting..\");\n            this.connect();\n        };   \n    }\n\n    socketNewMessage(data){\n        const parsedData = JSON.parse(data);\n        const command = parsedData.command;\n        if(Object.keys(this.callbacks).length === 0){\n            return;\n        }\n        if(command === 'game'){\n        \tconsole.log('game received')\n            this.callbacks[command](parsedData);\n        }\n        if(command === 'new_message'){\n            console.log(\"okay so this was called\")\n            this.callbacks[command](parsedData.message);\n        }\n    }\n\n    initUser(username){\n    \tthis.sendMessage({command : 'init', username : username})\n    }\n\n    reset(username){\n    \tthis.sendMessage({command: 'reset', username: username})\n    }\n\n    blockClick(username,i,j){\n    \tthis.sendMessage({command: 'block_click', username: username, i:i, j:j})\n    }\n\n    directionClick(username,direction){\n    \tthis.sendMessage({command: 'direction_click', username: username, direction:direction })\n    }\n    addCallbacks(gameCallback){\n        this.callbacks['game'] = gameCallback;\n    }\n\n    sendMessage(data){\n        try{\n        \tconsole.log('tried');\n            console.log({...data})\n            this.socketRef.send(JSON.stringify({...data}))\n        }\n        catch(err){\n            console.log(err.message);\n        }\n    }\n     state(){\n        return this.socketRef.readyState;\n    }\n\n\n    waitForSocketConnection(callback){\n        const socket = this.socketRef;\n        const recursion = this.waitForSocketConnection;\n        setTimeout(\n            function(){\n                if(socket.readyState === 1){\n                    console.log(\"Connection is made\");\n                    if(callback != null){\n                        callback();\n                    }\n                    return;\n                }\n                else{\n                    console.log(\"Wait for connection..\");\n                    recursion(callback);\n                }\n            }, 1);\n    }\n\n}\n\nlet WebSocketInstance = WebSocketService.getInstance();\n\nexport default WebSocketInstance;","import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport Colors from './colors';\nimport WebSocketInstance from './WebSocket';\n\nclass LoginComponent extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      username : ''\n    }\n  }\n\n  usernameChangeHandler = (event) => {\n    this.setState({\n      username: event.target.value\n    });\n  }\n\n  render() {\n    return(\n      <div className=\"login\">\n        <form onSubmit={(e) => this.props.handleLogin(e, this.state.username)}>\n          <input \n            type=\"text\"\n            onChange = {this.usernameChangeHandler}\n            value = {this.state.username}\n            placeholder = \"username\"\n            required \n          />\n          <button className=\"submit\" type=\"submit\">\n            Let's Go\n          </button>\n        </form>\n      </div>\n    );\n  }\n\n\n}\n\nfunction Block(props){\n  return (\n    <button className=\"square\" style={{backgroundColor:props.color}} onClick={props.onClick}>\n    </button>\n  )\n}\n\nclass Grid extends React.Component{\n\n  renderBlock(i,j){\n    let color = Colors[this.props.grid[i][j]]\n    return <Block\n      x={i}\n      y={j}\n      color={color}\n      onClick={() => this.props.onClick(i,j)}\n    />\n  }\n\n  renderRow(i,n){\n    let row = []\n    for(let j = 0; j<n; j++){\n      row.push(this.renderBlock(i,j));\n    }\n    return row;\n  }\n\n  renderGrid(n){\n    let grid = []\n    for(let i=0; i<n; i++){\n      grid.push(<div className=\"board-row\">{this.renderRow(i,n)}</div>);\n    }\n    return grid;\n  }\n\n  render(){\n    const n = this.props.size;\n    return(\n      <div>\n        {this.renderGrid(n)}\n      </div>\n    )\n  }\n}\n\nfunction Direction(props){\n  return(\n    <button className=\"direction\" onClick={props.onClick}>\n      {props.text}\n    </button>\n  )\n}\n\nfunction Blank(props){\n  return(\n    <button className=\"blank\">\n    </button>\n  )\n}\n\n\n\nclass Controls extends React.Component{\n\n  renderDirection(text){\n    return <Direction\n      text={text}\n      onClick={() => this.props.onClick(text)}\n    />;\n  }\n  renderBlank(){\n    return <Blank />;\n  }\n\n  render() {\n    return(\n      <div>\n        <div className=\"board-row\">\n          {this.renderBlank()}\n          {this.renderDirection(\"U\")}\n          {this.renderBlank()}\n        </div>\n        <div className=\"board-row\">\n          {this.renderDirection(\"L\")}\n          {this.renderBlank()}\n          {this.renderDirection(\"R\")}\n        </div>\n        <div className=\"board-row\">\n          {this.renderBlank()}\n          {this.renderDirection(\"D\")}\n          {this.renderBlank()}\n        </div>\n      </div>\n    )\n  }\n}\n\nfunction Reset(props){\n  return(\n    <button className=\"reset\" onClick={props.onClick}>\n      Reset\n    </button>\n  )\n}\n\nclass App extends React.Component{\n\n  constructor(props) {\n    super(props);\n    let size = 10\n    let grid = []\n    let row = size-1\n    let col = 0\n    for(let i=0;i<size;i++){\n      let row = Array(size).fill(\"blank\")\n      grid.push(row)\n    }\n    grid[row][col] = \"active\"\n    this.state = {\n      size:size,\n      grid: grid,\n      row: row,\n      col: col,\n      username: '',\n      loggedIn: false\n    };\n   \n  }\n    waitForSocketConnection(callback) {\n        const component = this;\n        setTimeout(\n            function(){\n                if(WebSocketInstance.state() === 1){\n                    console.log('Connection is made');\n                    callback()\n                    return;\n                }\n                else{\n                    console.log(\"Waiting for connection..\");\n                    component.waitForSocketConnection(callback);\n                }\n            }, 100);\n    }\n\n  handleDirectionClick(direction) {\n    let username = this.state.username\n    WebSocketInstance.directionClick(username,direction)\n    /*let row = this.state.row;\n    let col = this.state.col;\n    let size = this.state.size;\n    let grid = this.state.grid;\n    if(direction==\"U\"){\n      let destRow = row-3;\n      let valid = false;\n      if(destRow>=0){\n        if(grid[row-1][col]==\"blank\"&&grid[row-2][col]==\"blank\"&&grid[row-3][col]==\"blank\"){\n          valid = true;\n        }\n      }\n      if(valid){\n        grid[row][col] = \"split\";\n        grid[row-1][col] = \"pipe\";\n        grid[row-2][col] = \"pipe\";\n        grid[row-3][col] = \"active\";\n        row = destRow;\n        this.setState({\n          grid:grid,\n          row:row,\n        }) \n      }\n         \n    }\n    else if(direction==\"D\"){\n      let destRow = row+3;\n      let valid = false;\n      if(destRow<size){\n        if(grid[row+1][col]==\"blank\"&&grid[row+2][col]==\"blank\"&&grid[row+3][col]==\"blank\"){\n          valid = true;\n        }\n      }\n      if(valid){\n        grid[row][col] = \"split\";\n        grid[row+1][col] = \"pipe\";\n        grid[row+2][col] = \"pipe\";\n        grid[row+3][col] = \"active\";\n        row = destRow;\n        this.setState({\n          grid:grid,\n          row:row,\n        }) \n      }\n\n    }\n    else if(direction==\"R\"){\n      let destCol = col+3;\n      let valid = false;\n      if(destCol<size){\n        if(grid[row][col+1]==\"blank\"&&grid[row][col+2]==\"blank\"&&grid[row][col+3]==\"blank\"){\n          valid = true;\n        }\n      }\n      if(valid){\n        grid[row][col] = \"split\";\n        grid[row][col+1] = \"pipe\";\n        grid[row][col+2] = \"pipe\";\n        grid[row][col+3] = \"active\";\n        col = destCol;\n        this.setState({\n          grid:grid,\n          col:col,\n        }) \n      }\n    }\n    else{\n      let destCol = col-3;\n      let valid = false;\n      if(destCol>=0){\n        if(grid[row][col-1]==\"blank\"&&grid[row][col-2]==\"blank\"&&grid[row][col-3]==\"blank\"){\n          valid = true;\n        }\n      }\n      if(valid){\n        grid[row][col] = \"split\";\n        grid[row][col-1] = \"pipe\";\n        grid[row][col-2] = \"pipe\";\n        grid[row][col-3] = \"active\";\n        col = destCol;\n        this.setState({\n          grid:grid,\n          col:col,\n        }) \n      }\n\n    }*/\n  }\n\n  handleBlockClick(i,j){\n    let username = this.state.username\n    WebSocketInstance.blockClick(username,i,j)\n    /*let grid = this.state.grid;\n    let row = this.state.row;\n    let col = this.state.col;\n    if(grid[i][j]==\"split\"){\n      grid[i][j] = \"active\";\n      grid[row][col] = \"split\";\n      row = i;\n      col = j;\n      this.setState({\n        grid: grid,\n        row: row,\n        col: col,\n      })\n    }*/\n  }\n\n  handleReset(){\n    console.log(\"reset\")\n    WebSocketInstance.reset(this.state.username)\n    /*let grid = this.state.grid;\n    let size = this.state.size;\n    let row = size-1;\n    let col = 0;\n    for(let i=0;i<size;i++){\n      for(let j=0;j<size;j++){\n        grid[i][j] = \"blank\";\n      }\n    }\n    grid[row][col] = \"active\";\n    this.setState({\n      grid: grid,\n      row: row,\n      col: col,\n    })*/\n  }\n\n  handleLogin = (e,username) => {\n    e.preventDefault();\n    this.setState({\n      loggedIn: true,\n      username: username\n    })\n    WebSocketInstance.connect();\n    this.waitForSocketConnection(() => { \n      WebSocketInstance.initUser(username);\n      WebSocketInstance.addCallbacks(this.gameUpdate.bind(this))\n    });\n  }\n\n  gameUpdate(parsedData){\n    console.log('update')\n    const grid = parsedData['grid']\n    const row = parsedData['row']\n    const col = parsedData['col']\n    const size = parsedData['size']\n    this.setState({\n      grid: grid,\n      row: row,\n      col: col\n    })\n    \n  }\n\n  render() {\n    const size = this.state.size\n    const grid = this.state.grid\n    const loggedIn = this.state.loggedIn\n    return(\n       loggedIn ?\n      <div>\n        <Grid \n          size={size}\n          grid={grid}\n          onClick = {(i,j) => this.handleBlockClick(i,j)}\n        />\n        <Controls\n          onClick = {(direction) => this.handleDirectionClick(direction)}\n        />\n        <Reset\n          onClick = {() => this.handleReset()}\n        />\n      </div>\n      :\n      <LoginComponent\n        handleLogin = {this.handleLogin} />\n    )\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}